<html>
  <head>
    <meta charset="utf-8">
    <title>Soundcasts</title>
    <meta name="viewport" content="width=device-width, initial-scale=0.9">
    <link rel="stylesheet" href="reset.css">
    <link rel="stylesheet" href="style.css">
    <link href='https://fonts.googleapis.com/css?family=Lato:400,100,300,700' rel='stylesheet' type='text/css'>
    <link rel="icon" href="favicon.ico"/>
  </head>


  <body>
    <div class="container">
      <div class="header">
        <h1>Soundcasts</h1>
        <span>Turn SoundCloud profiles into podcasts.</span>
      </div>
      <div class="input">
        <input type="text" id="title" placeholder="Soundcast Title">
        <span>The title that will display in your podcast player.</span>
      </div>
      <div class="input">
        <input type="text" id="userId" placeholder="SoundCloud user_id">
        <span>https://soundcloud.com/<strong>user_id</strong></span>
      </div>
      <div class="input">
        <input type="text" id="regexString" placeholder="SoundCloud Regex Filter (Optional)">
        <span>Filter applied against <strong id="regexStringUserId">user_id</strong>'s track titles, JavaScript case-insensitive.</span>
      </div>
      <div class="input">
        <input type="text" id="url" placeholder="Soundcast URL" required="required">
        <span>Copy and paste this link into your podcast player.</span>
      </div>
    </div>
  </body>


  <script>
    var eventName = 'keyup';
    id('title').addEventListener(eventName, inputsChanged);
    id('userId').addEventListener(eventName, inputsChanged);
    id('regexString').addEventListener(eventName, inputsChanged);

    function title() { return id('title').value; }
    function userId() { return id('userId').value; }
    function regexString() { return id('regexString').value; }
    function regexStringUserId() { return id('regexStringUserId').value; }

    function inputsChanged() {
      var url = '';
      if (title().length && userId().length) {
        url = 'https://www.soundcasts.net/soundcast.xml';
        url += '?title=' + encodeURIComponent(title());
        url += '&userId=' + encodeURIComponent(userId());
        url += '&regexString=' + encodeURIComponent(regexString());
      }
      id('url').value = url;
      id('regexStringUserId').innerHTML = userId() || 'user_id';
    }

    function id(id) {
      return document.getElementById(id);
    }
  </script>
</html>
